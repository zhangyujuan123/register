$(function(){var e,n=$("#user"),t=$("#tel"),l=$("#pwd"),a=$(".btn"),u=$("#span1"),i=$("#span2"),f=$("#span3"),s=$("#span4"),r=$("#msg");function o(){if(""!==n.val())if(/[^\u4E00-\u9FA5\w]/.test(n.val()))u.html("用户名仅支持中英文、数字和下划线,且不能为纯数字");else if(/\D/.test(n.val())){for(var t=0,l=n.val(),e=0;e<l.length&&(/[\u4E00-\u9FA5]/.test(l[e])?t+=2:t+=1,!(14<t));e++);if(!(14<t))return u.html(" "),1;u.html("用户名不能超过7个汉字或14个字符")}else u.html("用户名仅支持中英文、数字和下划线,且不能为纯数字");else u.html("用户名不能为空！")}function c(){if(""!==t.val()){if(/^1[0-9]{10}$/.test(t.val()))return i.html(" "),1;i.html("手机号码格式不正确")}else i.html("请输入手机号码")}function v(){if(""!==l.val()){if(/(?!^\d+$)(?!^[A-Za-z]+$)(?!^[^A-Za-z0-9]+$)(?!^.*[\u4E00-\u9FA5].*$)^\S{8,14}$/.test(l.val()))return f.html(" "),1;f.html("密码设置不符合要求")}else f.html("密码设置不符合要求")}$(".btn2").click(function(){o()&&c()&&v()&&alert("注册成功！")}),n.focusout(function(){o()}),t.focusout(function(){c()}),l.focusout(function(){v()}),a.click(function(){if(s.html(""),c()){clearTimeout(e);var t=30;a.val("重新获取（30）"),a.attr("disabled","disabled");var l=setInterval(function(){t--,a.val("重新获取（"+t+")"),0===t?(clearInterval(l),a.val("获取验证码"),a.removeAttr("disabled"),""===r.val()&&s.html("请求超时，请稍后再试")):a.val("重新获取（"+t+")")},1e3)}else e=setTimeout(function(){if(""===r.val())return s.html("请求超时，请稍后再试"),clearTimeout(e),!1},3e4)})});